// (c) 2019-2020, Flare Networks Limited.

package misc

import (
	"github.com/ethereum/go-ethereum/common"

	"github.com/flare-foundation/coreth/core/state"
	"github.com/flare-foundation/coreth/params"
)

var validatorRegistryCreation = CoreContractUpdate{
	Address: params.ValidationAddress,
	Old:     []byte{},
	New:     common.Hex2Bytes("0x608060405234801561001057600080fd5b506004361061004c5760003560e01c8063177fbc71146100515780637d435cab1461007a578063a8ba24301461008f578063f082cac4146100af575b600080fd5b61006461005f366004610235565b6100b7565b60405161007191906102b7565b60405180910390f35b61008d610088366004610263565b6100d5565b005b6100a261009d366004610263565b610205565b60405161007191906102a3565b6100a261022a565b6001600160a01b031660009081526020819052604090205460601b90565b6001600160601b031981166000908152600160205260409020546001600160a01b03161561011e5760405162461bcd60e51b8152600401610115906102cc565b60405180910390fd5b604051637ac420ad60e01b815260009060036001609c1b0190637ac420ad9061014b9033906004016102a3565b60206040518083038186803b15801561016357600080fd5b505afa158015610177573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525081019061019b919061028b565b116101b85760405162461bcd60e51b8152600401610115906102fc565b6001600160601b0319811660009081526001602090815260408083208054336001600160a01b0319918216811790925590845291839052909120805490911660609290921c919091179055565b6001600160601b0319166000908152600160205260409020546001600160a01b031690565b60036001609c1b0181565b600060208284031215610246578081fd5b81356001600160a01b038116811461025c578182fd5b9392505050565b600060208284031215610274578081fd5b81356001600160601b03198116811461025c578182fd5b60006020828403121561029c578081fd5b5051919050565b6001600160a01b0391909116815260200190565b6001600160601b031991909116815260200190565b6020808252601690820152756e6f646520696420616c726561647920696e2075736560501b604082015260600190565b6020808252600f908201526e1b9bdd081dda1a5d195b1a5cdd1959608a1b60408201526060019056fea2646970667358221220ed4c6a76e9b1c5a24cf287d6e33daee31972187b1db9ab7843f24186c4729d1464736f6c63430007060033"),
}

func ValidatorRegistryCreated(statedb *state.StateDB) bool {
	return updateApplied(statedb, validatorRegistryCreation)
}

func CreateValidatorRegistry(statedb *state.StateDB) {
	applyUpdate(statedb, validatorRegistryCreation)
}
